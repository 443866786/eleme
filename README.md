# 基于vue2高仿饿了么
<p>点击 <a href="https://443866786.github.io/eleme/#/goods" title="这里">
这里</a> 查看在线演示.</p>
# 简单做一些笔记
##1.视图的显隐
通过控制值的变化，一般是boolean类型，结合v-if或者v-show来控制一个视图的显隐。需要多次进行显隐操作的dom使用v-show，可节省资源。
##2.箭头函数
组件中尽量使用箭头函数，因为箭头函数绑定当前组件的vue实例，我们常常需要在函数内部使用this来访问这个vue实例。
##3.nextTick的使用
一般在数据改变之后，dom仍未更新，此时操作dom可能会得不到最新的状态，我们可以将所需操作放到nextTick中作为回调，在dom更新后执行这个回调。
##4.商品列表滑动(betterScroll)
商品类型tab控制商品列表滑动，将商品列表的每一级高度缓存到一个数组heightList中，index值与tab栏中元素的index一一对应，点击tab后，将其index传入，通过这个index去heightList中获取所需滑动的距离，再调用列表滑动事件，滑动到相应的距离
##5.商品详情页的显隐。
通过控制一个boolean值来控制，不同的是点击商品列表的商品时可以调用foodDeatil组件的toggle方法，使之显示出来。
##6.点击加入购物车动画（$emit，cubic曲线）
在点击加入图标时，通过this.$root即根Vue实例下的一个空vue实例（实例化时new一个空vue实例挂载到data上，以便所有的子组件可以通过$root获得这个vue实例，用于事件的发布与监听）发布（$emit）一个“cartAdd”事件，将被点击的dom（event.target）作为参数传入，同样在购物车组件中，使用这个空vue实例监听这个时间，vue.on("cartAdd",callback)，在callback中可以获得这个dom对象，从而获得他的实时位置，进而做出动画，动画中用到了cubic曲线，可以做出想要的曲线。
##7.商品数量统计（Vue.set）
在添加商品时把对应的商品对象传入，给该商品设置一个计数属性（在该属性不存在的前提下，避免重复设置）count，语法：Vue.set(obj,key,value)。注意，如果不用ser，而是直接添加属性，这个属性无法被监测到。在计算属性中遍历所有的food，如果有count属性，就把他放进resultArr中，并将这个reasultArr绑定到购物车组件。通过购物车组件拿到这个参数，进行价格的计算等操作。
##8.用户评论（computed,filter）
用户评论视图的依赖状态有两个，一是评论的类型（好评，差评，全部），二是否有评论内容。因此我们在渲染评论视图时用一个计算属性去绑定他所需渲染的数据。在点击评论类型时运用排他思想，取到所需的类型，点击是否查看有内容的评论时取到所需类型，再通过这两个条件运用数组的过滤方法筛选出我们所需的评论，挂载到评论视图上。
